<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
		<script src="js/jquery.SuperSlide.2.1.1.js" type="text/javascript"></script>
		<link href="layui/css/layui.css" rel="stylesheet" type="text/css" />
		<script src="layui/layui.js"></script>
		<script src="js/F5.js"></script>
		<link href="css/search.css" rel="stylesheet" type="text/css" />
		<link href="css/common_voide.css" rel="stylesheet" type="text/css" />
		<link href="css/common.css" rel="stylesheet" type="text/css" />
		<link href="css/voide.css" rel="stylesheet" type="text/css" />
		<title>视频</title>
	</head>
	<body>
		<!-- 搜索 -->
		<div id="search_container">
			<div class="container">
				<div class="logo"><a href="index.html"><img src="ss" alt="logo位置" /></a></div>
				<div class="parent">
					<input type="text">
					<input type="button" value="搜索">
					<p class="Words"><a href="#">苹果</a><a href="#">香蕉</a><a href="#">菠萝</a><a href="#">西红柿</a><a href="#">橙子</a><a
						 href="#">苹果</a></p>
				</div>
			</div>
		</div>
		<!--视频框-->
		<div class="video" style="width: 100%;height: 35vw;;background-color: #424644; overflow:hidden;zoom:1;padding-bottom: 1%;">
			<!-- 视频模块 -->
			<div id="video_mode" style="width: 50%; border: #fff 1px solid;border: 10px ridge #F4E9E0;float: left; position: relative;height: 85%;margin-left: 14%; margin-top: 1%;">
				<video id="test" src=""></video>
				<div class="controls">
					<div class="zshi">

					</div>
					<div class="switch">
						<div class="bf">
							<i class="layui-icon layui-icon-play play-button-big"></i>
							<i class="layui-icon layui-icon-play play-button"></i>
							<i class="layui-icon layui-icon-pause pause-button" style="display: none;"></i>
						</div>
					</div>
					<div class="progress">
						<div class="curr-progress"></div>
					</div>
					<div class="time">
						<span class="curr-time">00:00:00</span>/
						<span class="total-time" style="color: #585858;">00:00:00</span>
					</div>
					<div id="ran"></div>
					<!-- <i class="layui-icon layui-icon-speaker" id="ranDiv"></i> -->
					<img src="img/soundsize.png" id="ranDiv">
					<!-- <i class="layui-icon layui-icon-water extend"></i> -->
					<img class="extend" src="img/全屏.png">
				</div>
			</div>
			<!-- 视频简介模块 -->
			<div id="video_jj" style="width: 20%; border: green 1px solid; float: right; position: relative;height: 99%; margin-right: 14%;margin-bottom: 100px;">
				<p style="color: red; text-align: center;">简介区</p>
			</div>
			<!-- 标题 -->
			<div id="video_bt" style="width: 50%; border: red 1px solid;float: left; position: relative;height: 3vw;margin-left: 14%; margin-top: 1%;">
				<p style="color: red; text-align: center;">标题</p>
			</div>
		</div>
		<!-- 视频榜 -->
		<div id="voide_top">
			<p id="title_style">视频榜</p>
			<div id="voide_1">
				<ul>
					<li>
						<a href=""></a>
						<div id="aaa">
							1
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							2
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							3
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							4
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							5
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							6
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							7
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							8
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							9
						</div>
					</li>
					<li>
						<a href=""></a>
						<div id="aaa">
							10
						</div>
					</li>

				</ul>
			</div>
		</div>
		<!-- 图片缩放 -->
		<div id="Image_scaling">
			<!-- 图片的位置div -->
			<div id="Image_div">
				<p id="title_style">图片预览</p>
				<ul>
					<li>
						<div id="">
							1
						</div>
					</li>
					<li>
						<div id="">
							1
						</div>
					</li>
					<li>
						<div id="">
							1
						</div>
					</li>
					<li>
						<div id="">
							1
						</div>
					</li>
					<li>
						<div id="">
							1
						</div>
					</li>
					<li>
						<div id="">
							1
						</div>
					</li>
				</ul>
			</div>
		</div>

		<!-- 详细信息模块 -->
		<div id="details">
			<!-- 内部div -->
			<div id="details1">
				<ul>
					<li class="active"><button id="property-id" class="current layui-btn-warm">查看原图</button></li>
					<li><button id="detail-id" href="#shangpjs" class="layui-btn-warm">待定区</button></li>
					<li><button id="shot-id" href="#miqsp" class="layui-btn-warm">待定区</button></li>
					<li><button id="coms1-id" class="layui-btn-warm">评论区</button></li>
				</ul>
			</div>


			<!-- 图片流加载 -->
			<!-- <iframe src="Flow_loading.html" id="gg"></iframe> -->
			<div id="init_pic">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
					<legend>图片详细</legend>
				</fieldset>

			</div>

			<!-- 评论区 -->
			<div id="init_say">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
					<legend>评论区</legend>
				</fieldset>
				<!-- 用户评论区 -->
				<div class="comment">
				</div>
				<!-- 分页区 -->
				<div class="limit">
					<div id="demo3"></div>
				</div>
				<!-- 输入区 -->
				<div class="input-area">
					<textarea id="demo" style="display: none;"></textarea>
					<button id="t" type="button">提交</button>
				</div>

			</div>
		</div>

		</div>


		<!-- </div>
				<!--右侧菜单栏购物车样式-->
		<div class="fixedBox">
			<ul class="fixedBoxList">
				<li class="fixeBoxLi user"><a href="User.html"> <span class="fixeBoxSpan iconfont icon-yonghu"></span> <strong>用户</strong></a>
				</li>

				<li class="fixeBoxLi code cart_bd " style="display:block;" id="cartboxs">
					<span class="fixeBoxSpan iconfont icon-erweima"></span> <strong>微信</strong>
					<div class="cartBox">
						<div class="bjfff"></div>
						<div class="QR_code">
							<p><img src="images/erweim.jpg" width="150px" height="150px" style=" margin-top:10px;" /></p>
							<p>微信扫一扫，关注我们</p>
						</div>
					</div>
				</li>

				<li class="fixeBoxLi Home"> <a href="./"> <span class="fixeBoxSpan iconfont  icon-shoucang"></span> <strong>收藏</strong>
					</a> </li>
				<li class="fixeBoxLi Home"> <a href="./"> <span class="fixeBoxSpan iconfont  icon-zuji"></span> <strong>足迹</strong>
					</a> </li>
				<li class="fixeBoxLi Home"> <a href="./"> <span class="fixeBoxSpan iconfont  icon-fankui"></span> <strong>反馈</strong>
					</a> </li>
				<li class="fixeBoxLi BackToTop"> <span class="fixeBoxSpan iconfont icon-top"></span> <strong>返回顶部</strong> </li>
			</ul>
		</div>




		<div class="fixed">

			<div id="copyright1">
				<div class="footerbox clearfix">
					<div class="clearfix">
						<div class="">
							<dl>
								<dt>新手上路</dt>
								<dd><a href="#">隐私声明 </a></dd>
								<dd><a href="#">推荐分享说明 </a></dd>
							</dl>
							<dl>
								<dt>支付方式</dt>
								<dd><a href="#">保险需求测试</a></dd>
								<dd><a href="#">专题及活动</a></dd>
								<dd><a href="#">常见问题 </a></dd>
							</dl>
							<dl>
								<dt>售后保障</dt>
								<dd><a href="#">保险需求测试</a></dd>
								<dd><a href="#">专题及活动</a></dd>
								<dd><a href="#">挑选保险产品</a> </dd>
								<dd><a href="#">常见问题 </a></dd>
							</dl>
							<dl>
								<dt>支付方式</dt>
								<dd><a href="#">保险需求测试</a></dd>
								<dd><a href="#">专题及活动</a></dd>
								<dd><a href="#">挑选保险产品</a> </dd>
								<dd><a href="#">常见问题 </a></dd>
							</dl>
							<dl>
								<dt>帮助中心</dt>
								<dd><a href="#">保险需求测试</a></dd>
								<dd><a href="#">专题及活动</a></dd>
								<dd><a href="#">挑选保险产品</a> </dd>
								<dd><a href="#">常见问题 </a></dd>
							</dl>
						</div>
					</div>
					<div class="text_link">
						<p>
							<a href="#">关于我们</a>｜ <a href="#">公开信息披露</a>｜ <a href="#">加入我们</a>｜ <a href="#">联系我们</a>｜ <a href="#">版权声明</a>｜
							<a href="#">隐私声明</a>｜ <a href="#">网站地图</a></p>
						<p>蜀ICP备11017033号 Copyright ?2011 成都福际生物技术有限公司 All Rights Reserved. Technical support:CDDGG Group</p>
					</div>
				</div>


			</div>


	</body>
	<script src="js/Search_Following.js" type="text/javascript"></script>
	<script src="js/url.js"></script>
	<script>
		$("#user").click(function() {
			location.href = "Login.html";
		})
		$("#newuser").click(function() {
			location.href = "Register.html";
		})
		json_url = jsonURL()
		console.log(json_url.vid)
		
		$("body").ready(function(){
			$.ajax({
				type: "post",
				url: "http://api.pei.com/api/vadio/vadio/selectAllVadio",
				dataType: "json",
				data: {vid:json_url.vid},
			
				success: function(data) {
					console.log(data)
						$("#test").attr("src",data.data[0].vpath)
			
				}
			
			})
		})
		
		
		
		
		json_url.vid
		
		
	</script>
	<script src="js/Loading.js"></script>
	<script>
		$("#property-id").click(function() {
			$("#init_pic").css("display", "block")
			$("#init_say").css("display", "none")
		})
		$("#coms1-id").click(function() {
			$("#init_pic").css("display", "none")
			$("#init_say").css("display", "block")
		})

	</script>
	<!-- 视频js -->
	<script type="text/javascript">
		var video = document.querySelector('video');
		var playBtn = document.querySelector('.bf');
		var currProgress = document.querySelector('.curr-progress');
		var currTime = document.querySelector('.curr-time');
		var totalTime = document.querySelector('.total-time');
		var extend = document.querySelector('.extend');
		var tTime = 0;
		var videoId = $("video").attr("id");
		var sound = video.volume * 100;

		playBtn.onclick = function() {
			if (video.paused || video.ended) { // 如果视频是暂停的
				var localTime = localStorage.getItem(videoId);
				if (localTime != 'null') {
					continuePlay(localTime);
				}
				video.play(); //play()播放 load()重新加载 pause()暂停 
				$(".play-button").hide();
				$(".pause-button").show();
				$(".play-button-big").hide();
				// $(".pause-button-big").fadeIn(1000);
				// $(".pause-button-big").fadeOut(1000);
				$(".pause-button-big").hide();
			} else {
				video.pause();
				$(".play-button").show();
				$(".pause-button").hide();
				$(".play-button-big").show();
			}
		};

		//当视频能播放(已经通过网络加载完成)时 
		video.oncanplay = function() {
			tTime = video.duration; //获取视频总时长(单位秒) 
			var tTimeStr = getTimeStr(tTime);
			totalTime.innerHTML = tTimeStr;
		}; //当视频当前播放时间更新的时候 
		video.ontimeupdate = function() {
			var cTime = video.currentTime; //获取当前播放时间 
			localStorage.setItem(videoId, cTime);
			var cTimeStr = getTimeStr(cTime);
			currTime.innerHTML = cTimeStr;
			currProgress.style.width = cTime / tTime * 100 + "%";
			if (video.currentTime == video.duration) {
				$(".play-button").show();
				$(".pause-button").hide();
				$(".play-button-big").fadeIn(1000);
			}
		}
		extend.onclick = function() {
			video.webkitRequestFullScreen(); //视频全屏 
		};
		$(".video").dblclick(function() {
			video.webkitRequestFullScreen(); //双击视频全屏
		});
		//将以秒为单位的时间变成“00:00:00”格式的字符串 
		function getTimeStr(time) {
			var h = Math.floor(time / 3600);
			var m = Math.floor(time % 3600 / 60);
			var s = Math.floor(time % 60);
			h = h >= 10 ? h : "0" + h;
			m = m >= 10 ? m : "0" + m;
			s = s >= 10 ? s : "0" + s;
			return h + ":" + m + ":" + s;
		};
		//拖动进度时
		$(".progress").on("click", function(e) {
			var time = video.duration * (e.offsetX / $(".progress").width());
			video.currentTime = time;
		});

		function continuePlay(time) {
			video.currentTime = time;
		};
		//调音量
		$("#ranDiv").click(function() {
			$("#ran").toggle();
		});

		var data = {};
		layui.use('slider', function() {
			var $ = layui.$,
				slider = layui.slider;
			slider.render({
				elem: '#ran',
				type: 'vertical', //垂直滑块
				theme: '#00ff99',
				height: 80,
				value: sound,
				change: function(vals) {
					data.val = vals;
				}

			});
		});
		Object.defineProperty(data, "val", {
			set: function(value) {
				video.volume = value / 100;
			}
		});
		//视频控制图标上滑
		$("#video_mode").mousemove(function() {
			$(".controls").show();
		});
		$("#video_mode").mouseout(function() {
			$(".controls").hide();
		});
		$("#details1").ready(function() {

			$(".comment").css("height", $(this).width() * 0.7)
			$(".limit").css("height", $(this).width() * 0.04)
			$(".input-area").css("height", $(this).width() * 0.17)
		})
		//富文本编辑器
		layui.use('layedit', function(jsondata) {
			var layedit = layui.layedit;
			var $ = layui.jquery;
			layedit.set({
				uploadImage: {

					url: 'http://com.zrrd.hbs' //接口url
						,
					type: 'post', //默认post
					code: 0 //0表示成功，其它失败
						,
					msg: "" //提示信息 //一般上传失败后返回
						,
				}
			});

			//注意：layedit.set 一定要放在 build 前面，否则配置全局接口将无效。
			var index = layedit.build('demo', {
				height: 180
			}); //建立编辑器

			//页面显示富文本提交数据
			$.ajax({
				method: 'post',
				url: 'http://192.168.1.22:8082/comment/show',
				data: {
					videoId: 1
				},
				success: function(data) {
					// var json = eval("(" + data + ")");

					for (var i = 0; i < data.length; i++) {
						$(".comment").append("<div class = 'boxx'>" + (i + 1) + "楼" + "&nbsp&nbsp&nbsp&nbsp" + data[i].content +
							"&nbsp&nbsp&nbsp&nbsp" +
							"</div>");
					}
				}
			});

			//提交富文本信息
			$("#t").click(function() {
				var ifnull = layedit.getContent(index);
				// alert(ifnull);
				if (ifnull != '') {
					$(".comment").append(layedit.getContent(index));
					$.ajax({
						method: 'post',
						url: 'http://192.168.1.22:8081/richtext/upload',
						data: {
							content: ifnull,
							videoId: 1,
						},
						success: function() {
							location.reload();
						}
					})
				} else {
					alert("你是不是瞎!!!");
				}

			})
		});
		layui.use(['laypage', 'layer'], function() {
			var laypage = layui.laypage,
				layer = layui.layer;
			//自定义首页、尾页、上一页、下一页文本
			laypage.render({
				elem: 'demo3',
				count: 100,
				limit: 2,
				first: '首页',
				last: '尾页',
				prev: '<em>上一页</em>',
				next: '<em>下一页</em>',
				jump: function(obj, first) {
					//obj包含了当前分页的所有参数，比如：
					console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
					console.log(obj.limit); //得到每页显示的条数

					//首次不执行
					if (!first) {
						//do something
					}
				}
			});
		});
	</script>
	</body>
</html>
